% Packages
\usetheme{yale} % Available at https://github.com/dfeng/yale-beamer , with modifications by Raymond Ehlers.
\usepackage{hyperref}
\usepackage{tikz}

% Define the appropriate logos
% This is the small logo shown on most slides
% Huge hack, but it will work until I updated the theme more extensively
\logo{%
	\usebeamerfont{progress}\usebeamercolor[fg]{progress} \insertshortauthor\ - \insertdate%
}
% This is the title logo
\pgfdeclareimage{beamerTitleLogoALICE}{$HOME/.pandoc/preamble/images/aliceLogo}
\titlegraphic{
	\begin{tikzpicture}
		\node [scale=0.115] (aliceTitleLogo) {\pgfuseimage{beamerTitleLogoALICE}};
		\node [anchor=west, xshift=2.5em] (yaleTitleLogo) {\pgfuseimage{beamerTitleLogoYale}};
	\end{tikzpicture}
}

% Can change background color to white for printing
%\setbeamercolor{background canvas}{bg=white}

% Setting options
% For drawing
% It may be better to use TikZ for such drawings in the future.
\setlength{\unitlength}{1in}
\thicklines

% Show the outline at the beginning of each section
% See: https://tex.stackexchange.com/a/26713
\AtBeginSection[]
{
    \begin{frame}<beamer>
        \frametitle{Outline}
        \tableofcontents[currentsection]
    \end{frame}
}

% Images
\newcommand{\insertImage}[2]{\center{\frame{\includegraphics[width=#1]{images/#2}}}}

% Backup separator
\newcommand{\backupSlide}{\vfill%
    \centering%
    \begin{beamercolorbox}[sep=8pt,center,shadow=true,rounded=true]{title}%
        \usebeamerfont{title}Backup\par%
    \end{beamercolorbox}%
    \vfill}

% Don't include backup slides in the slide count
% appendixnumberbeamer doesn't work because you cannot add latex
% between frames. See https://github.com/jgm/pandoc/issues/4403
% I tried a number of different options, but the only one I could
% could get to work is below and rather hacky...
% Inspired by the first part of https://stackoverflow.com/a/2370399
% NOTE: This effectively supersedes `\backupSlide{}`, but it is kept
%       separately for backwards compatibility.
\newcommand{\backupbegin}{
   \newcounter{framenumberappendix}
   \setcounter{framenumberappendix}{\value{framenumber}}
   \backupSlide{}%
}
\newcommand{\backupend}{
   \addtocounter{framenumberappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumberappendix}}
}
